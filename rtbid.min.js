function rtBidInsertBanner(e){var t={endsWith:function(e,t){return-1!==e.indexOf(t,e.length-t.length)},getFlashVersion:function(){var e="application/x-shockwave-flash";if(navigator.mimeTypes&&navigator.mimeTypes[e]&&navigator.mimeTypes[e].enabledPlugin&&navigator.mimeTypes[e].enabledPlugin.description){var n=navigator.mimeTypes[e].enabledPlugin.description;return parseInt(n.substring(n.indexOf(".")-2),10)}if(window.ActiveXObject)try{var r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(r){var a=r.GetVariable("$version");if(a)return parseInt(a,10)}}catch(i){t.saveError("gfv",i)}return 0},addParameters:function(e,t){for(var n in e)e[n]&&(e[n]=-1===e[n].indexOf("?")?e[n]+"?"+t:e[n]+"&"+t)},invokePixels:function(e,t){var n=e[t];if(n){for(var r=0;r<n.length;r++){var a=n[r];a&&((new Image).src=a)}e[t]=null}},addRemoveCheckBannerVisible:function(e,n){e+="EventListener";var r=window;r[e]("scroll",n),r[e]("resize",n);try{for(;null!==r.parent&&r.parent!==r;)r=r.parent,r[e]("scroll",n),r[e]("resize",n)}catch(a){t.saveError("cbv",a)}},getAbsPosition:function(e){try{var n=t.getBoxInRootWindow(window,e);if(!n.rootWindow)return null;var r,a=n.rootWindow,i=a.innerWidth||a.document.documentElement.clientWidth,l=a.innerHeight||a.document.documentElement.clientHeight,o=n.x+n.w/2,s=n.y+n.h/2;return 0===n.w||o>i?r="I":i/3>o?r="L":2*i/3>o?r="C":i>=o&&(r="R"),0===n.h||s>l?r+="I":l/3>s?r+="T":2*l/3>s?r+="C":l>=s&&(r+="B"),r}catch(c){return t.saveError("ap",c),null}},isVisible:function(e){try{var n=t.getBoxInRootWindow(window,e);return n.w*n.h>=.7*e.offsetHeight*e.offsetWidth}catch(r){return t.saveError("iv",r),!0}},getBoxInRootWindow:function(e,n){var r={x:0,y:0,w:n.offsetWidth,h:n.offsetHeight};try{for(r=t.getBoxInWindow(e,n,r);e.parent!==e&&null!==e.parent;)r=t.getBoxInWindow(e.parent,e.frameElement,r),e=e.parent;r.rootWindow=e}catch(a){t.saveError("brw",a)}return r},getBoxInWindow:function(e,n,r){if(!n)return r;var a=e.document.documentElement,i=e.document.body,l={x:e.pageXOffset||a.scrollLeft||i.scrollLeft,y:e.pageYOffset||a.scrollTop||i.scrollTop,w:e.innerWidth||a.clientWidth,h:e.innerHeight||a.clientHeight};if(n.getBoundingClientRect){var o=n.getBoundingClientRect(),s=a.clientLeft||i.clientLeft||0,c=a.clientTop||i.clientTop||0;r.x+=Math.round(o.left+l.x-s),r.y+=Math.round(o.top+l.y-c)}else for(;n;)r.x+=parseFloat(n.offsetLeft),r.y+=parseFloat(n.offsetTop),n=n.offsetParent;return t.intersect(r,l)},intersect:function(e,t){var n=Math.min(e.x+e.w,t.x+t.w),r=Math.min(e.y+e.h,t.y+t.h),a={};return a.x=Math.max(e.x,t.x),a.y=Math.max(e.y,t.y),a.w=Math.max(0,n-a.x),a.h=Math.max(0,r-a.y),a},saveError:function(e,n){e&&n&&n.name&&(t.err?t.err+=","+e+"-"+n.name:t.err=e+"-"+n.name)}},n=null,r=null,a=null;try{if(e.flash&&t.endsWith(e.flash,".swf")&&t.getFlashVersion()>=10){a="flash";var i=document.createElement("div");i.style.cssText="position: relative;",n=document.createElement("a"),n.style.cssText="position:absolute;width:"+e.w+";height:"+e.h+";left:0;top:0;background:url('http://s3-eu-west-1.amazonaws.com/rtbid/js/1.png') no-repeat left top;",e.link&&(n.href=e.link),n.target="_blank";var l=document.createElement("object");l.setAttribute("classid","clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"),l.codeBase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0",l.width=e.w,l.height=e.h;var o=document.createElement("param");o.name="movie",o.value=e.flash;var s=document.createElement("param");s.name="flashvars",s.value=e.flashvars;var c=document.createElement("param");c.name="allowScriptAccess",c.value="never";var d=document.createElement("param");d.name="quality",d.value="high";var h=document.createElement("param");h.name="menu",h.value="false";var m=document.createElement("param");m.name="wmode",m.value="transparent";var u=document.createElement("embed");u.width=e.w,u.height=e.h,u.src=e.flash,u.setAttribute("flashvars",e.flashvars),u.setAttribute("allowScriptAccess","never"),u.setAttribute("quality","high"),u.setAttribute("menu","false"),u.setAttribute("wmode","transparent"),u.setAttribute("swLiveConnect","false"),u.setAttribute("type","application/x-shockwave-flash"),u.setAttribute("pluginspage","http://www.macromedia.com/go/getflashplayer"),l.appendChild(o),l.appendChild(s),l.appendChild(c),l.appendChild(d),l.appendChild(h),l.appendChild(m),l.appendChild(u),i.appendChild(n),i.appendChild(l),document.body.appendChild(i)}else if(e.img){a="img",n=new Image(e.w,e.h),n.src=e.img,n.border=0,n.alt=e.alt;var v=document.createElement("a");v.href=e.link,v.target="_blank",v.appendChild(n),document.body.appendChild(v)}else if(e.cityads){a="cityads";var f=document,p=Math.floor(999*Math.random());f.write('<div id="x'+p+'"></div>');var g=f.createElement("script");g.type="text/javascript",g.async=!0,g.src=e.cityads+"&dv="+p;var w=f.getElementsByTagName("script")[0];w.parentNode.insertBefore(g,w),n=f.getElementById("x"+p)}else{if(a="text",n=document.createElement("div"),n.style.cssText="width:"+e.w+"; height:"+e.h+"; border:solid 1px gray; display:inline-block; text-align:center",e.link){var b=document.createElement("a");b.href=e.link,b.target="_blank",b.innerHTML=e.alt,n.appendChild(b),r=b}else n.innerHTML=e.alt;document.body.appendChild(n)}}catch(y){t.saveError("ib",y)}var x;try{x=(new Date).getTime()}catch(y){t.saveError("t",y)}if(e.post){try{var E="";if(null!==a&&(E+="&type="+a),null!==n){var k=t.getAbsPosition(n);null!==k&&(E+="&pos="+k)}screen&&screen.width&&screen.height&&(E+="&screen="+screen.width+"x"+screen.height),t.err&&(E+="&err="+t.err,t.err=null),E.length>0&&t.addParameters(e.post,E.substring(1))}catch(y){t.saveError("pt",y)}t.invokePixels(e,"post")}if(null!==n&&e.show){var C=function(){if(e.show){if(t.isVisible(n)){try{var r="";if(x){var a=(new Date).getTime();r+="&sdt="+(a-x)}t.err&&(r+="&err="+t.err,t.err=null),t.addParameters(e.show,r.substring(1))}catch(i){t.saveError("sh",i)}t.invokePixels(e,"show"),t.addRemoveCheckBannerVisible("remove",C)}}else t.addRemoveCheckBannerVisible("remove",C)};t.addRemoveCheckBannerVisible("add",C),setTimeout(C,200)}if(e.click){if(null===r&&(r=n,null===r))return;var B=function(){if(e.click){if(x){var n=(new Date).getTime();t.addParameters(e.click,"cdt="+(n-x))}t.invokePixels(e,"click")}r.removeEventListener("click",B)};r.addEventListener("click",B)}}
